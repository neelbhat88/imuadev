<div ng-controller="AcademicsProgressController" class="academicsProgressContainer">

  <div class="module-container clear" modulecolor="{{selected_module.module_title}}">

    <div class="module module--grades">

      <div class="module--header">Grades</div>

      <div class="module--content">

        <div class="module--no-data" ng-show="user_classes.length == 0">
          <h6 ng-if="current_user.is_student">{{student.first_name}}, looks like you haven't added any classes yet. Let's get that taken care of!</h6>
          <h6 ng-if="!current_user.is_student">{{student.first_name}} hasn't entered any classes yet.</h6>
        </div>

        <div class="module--data">

          <table>
            <thead>
              <th width="60%">Class</th>
              <th>Grade</th>
            </thead>
            <tbody>
              <tr ng-repeat="user_class in user_classes" ng-class="{'last':$last}">
                <td ng-hide="user_class.editing" colspan="2">
                    <table class="table-primary">
                        <tbody>
                            <tr>
                                <td width="60%">{{user_class.name}}</td>
                                <td>{{user_class.grade}}</td>
                                <td class="glyphicons">
                                  <div class="glyphicon-container">
                                    <span class="glyphicon glyphicon-info-sign" title="More Info" ng-click="showMoreInfo = !showMoreInfo"></span>
                                    <span class="glyphicon glyphicon-pencil" title="Edit Class" ng-click="editClass(user_class)"></span>
                                    <span class="glyphicon glyphicon-trash" title="Delete Class" ng-click="deleteClass(user_class)"></span>
                                  </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table-secondary" ng-show="showMoreInfo && !user_class.editing">
                        <thead>
                            <th>Credit Hours</th>
                            <th>Level</th>
                            <th>Subject</th>
                            <th>Period</th>
                            <th>Room</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{user_class.credit_hours}}</td>
                                <td>{{user_class.level}}</td>
                                <td>{{user_class.subject}}</td>
                                <td>{{user_class.period}}</td>
                                <td>{{user_class.room}}</td>
                            </tr>
                        </tbody>
                    </table>
                </td>

                <td class="editing" ng-show="user_class.editing" colspan="2">

                  <span class="input-group">
                      <label>Class</label>
                      <input class="form-control" ng-model="user_class.new_name" placeholder="Class Name" name="classname">
                  </span>

                  <span class="input-group">
                      <label>Grade</label>
                      <select class="form-control" ng-model="user_class.new_grade">
                        <option value="A">A</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B">B</option>
                        <option value="B-">B-</option>
                        <option value="C+">C+</option>
                        <option value="C">C</option>
                        <option value="C-">C-</option>
                        <option value="D+">D+</option>
                        <option value="D">D</option>
                        <option value="D-">D-</option>
                        <option value="F">F</option>
                      </select>
                  </span>

                  <span class="input-group half-width">
                    <label>Credit Hours</label>
                    <input class="form-control" ng-model="user_class.new_credit_hours" ng-init="user_class.new_credit_hours = 1" placeholder="Credit Hours" name="credithours">
                  </span>

                  <span class="input-group half-width">
                      <label>Level</label>
                      <select class="form-control" ng-model="user_class.new_level" ng-init="user_class.new_level = 'Regular'" ng-options="v as v for (k,v) in CONSTANTS.CLASS_LEVELS"></select>
                  </span>

                  <span class="input-group">
                      <label>Subject</label>
                      <select class="form-control" ng-model="user_class.new_subject" ng-options="v as v for (k,v) in CONSTANTS.CLASS_SUBJECTS">
                          <option value="">--Select Subject--</option>
                      </select>
                  </span>

                  <span class="input-group half-width">
                      <label>Period</label>
                      <input class="form-control" ng-model="user_class.new_period" placeholder="Period (optional)" name="period">
                  </span>

                  <span class="input-group half-width">
                      <label>Room</label>
                      <input class="form-control" ng-model="user_class.new_room" placeholder="Room (optional)" name="room">
                  </span>

                  <button class="submit" title="Confirm" ng-click="saveClass(user_class)">Confirm</button>
                  <button class="cancel" title="Cancel" ng-click="cancelEdit(user_class)">Cancel</button>

                </td>
              </tr>
            </tbody>

          </table>

          <button ng-hide="classes.editing" class="btn btn-default" ng-if="editable(current_user, selected_semester)" ng-click="addClass()">Add Class</button>

        </div><!-- /module--data -->

      </div><!-- /module--content -->

    </div><!-- /module--grades -->

    <div class="module module--gpa">

      <div class="module--header">GPA</div>

      <div class="module--content">

      	<div class="module--data user-class-greeting">
          <span ng-if="current_user.is_student">Hey {{student.first_name}}, you are currently earning a</span>
          <span ng-if="!current_user.is_student">{{student.first_name}} is currently earning a</span>
          <h2>{{gpa}}</h2>
          <h4>GPA</h4>
          this semester.
        </div>

      </div>

    </div><!-- /module--gpa -->

    <div class="module module--milestones">

        <div class="module--header">{{selected_module.module_title | underscoresToSpaces}} Milestones</div>

        <div class="module--content">

        <div class="module--no-data" ng-show="selected_module.points.total == 0">
          <p>Looks like there aren't any {{selected_module.module_title | underscoresToSpaces}} milestones for this semester.</p>
        </div>

        <div class="module--data" ng-if="milestones.length > 0">

          <div class="module--submodule">

          	<div class="module--subhead">Next Milestones</div>

              <div class="milestone-item" ng-repeat="milestone in milestones" ng-if="!milestone.earned">
              <div class="milestone-item-unstatisfied">

                <div class="milestone--point-circle">
                  <div class="point-circle--inside">
                    <h5 class="bold">{{milestone.points}}</h5>
                    <p>Points</p>
                  </div>
                </div>

                <input type="checkbox" ng-if="milestone.submodule === 'YesNo'" ng-model="milestone.earned" ng-change="toggleYesNoMilestone(milestone)"
                  ng-disabled="!editable(current_user, selected_semester)">
                <h6>{{milestone | printMilestone}}</h6>
              </div>
            </div>

          </div>

          <div class="milestones-unsatisfied module--submodule clear">

          	<div class="module--subhead">Completed Milestones</div>

            <div class="milestone-item" ng-repeat="milestone in milestones" ng-if="milestone.earned">
              <div class="milestone-item-statisfied">

                <div class="milestone--point-circle">
                  <div class="point-circle--inside">
                    <h4 class="bold">âœ“</h4>
                  </div>
                </div>

                <input type="checkbox" ng-if="milestone.submodule === 'YesNo'" ng-model="milestone.earned" ng-change="toggleYesNoMilestone(milestone)"
                  ng-disabled="!editable(current_user, selected_semester)">
                <h6>{{milestone | printMilestone}}</h6>
              </div>
            </div>

          </div>

        </div>

      </div><!-- /module-inner -->

    </div><!-- /academic-milestones -->

  </div>

</div>
