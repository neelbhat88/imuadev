<div ng-controller="TestingProgressController" class="testingProgressContainer">

  <div class="module-userTests section-wrapper clear">

    <div class="section section--tests">

      <div class="section--header">Tests Taken</div>

      <div class="section--inner">

        <div ng-show="userTests.length == 0">
          <h6>{{student.first_name}}, looks like you haven't entered any data.</h6>
          <h6>Let's get that taken care of. Add tests you've taken this semester.</h6>
        </div>

        <div class="module-data">

          <div class="noUserTests" ng-hide="userTests.length != 0">No tests added</div>

          <div class="module-data-items">

            <div class="module-data__item clear" ng-repeat="userTest in userTests" ng-class="{'last':$last}">

              <div class="item item__test clear">

                <div class="item__test-date">
                  <span ng-hide="userTest.editing">{{userTest.date | date: 'MM/dd/yy'}}</span>
                </div>

                <div class="item__test-name">
                  <span ng-hide="userTest.editing">{{userTest.orgTest.title}}</span>
                </div>

                <div class="item__test-score">
                  <span ng-hide="userTest.editing">{{userTest.score}}</span>
                </div><!-- /item__test-score -->

                <div class="editor-wrapper" ng-show="userTest.editing">
                  <div>Test Taken:</div>
                  <select class="form-editor" ng-options="orgTest as orgTest.title for orgTest in orgTests" ng-model="userTest.new_orgTest">
                    <option value="">--- Select Test ---</option>
                  </select>
                </div>
                <div class="editor-wrapper" ng-show="userTest.editing && userTest.new_orgTest.score_type != 'Letter Grade' && userTest.new_orgTest != null">
                  <div>Score:</div>
                  <input class="form-editor" ng-model="userTest.new_score" placeholder="Score"></input>
                </div>
                <div class="editor-wrapper" ng-show="userTest.editing && userTest.new_orgTest.score_type == 'Letter Grade' && userTest.new_orgTest != null">
                  <div>Grade:</div>
                  <select class="form-editor" ng-model="userTest.new_score">
                    <option value="A">A</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B">B</option>
                    <option value="B-">B-</option>
                    <option value="C+">C+</option>
                    <option value="C">C</option>
                    <option value="C-">C-</option>
                    <option value="D+">D+</option>
                    <option value="D">D</option>
                    <option value="D-">D-</option>
                    <option value="F">F</option>
                  </select>
                </div>
                <div class="editor-wrapper" ng-show="userTest.editing && userTest.new_orgTest != null">
                  <div>Date Taken:</div>
                  <input class="form-editor" type="text" ng-model="userTest.new_date" datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" is-open="isOpen" ng-click="isOpen = true">
                </div>

                <div class="item__icons">
                  <div ng-if="editable(current_user, selected_semester)" ng-hide="userTest.editing">
                    <span class="glyphicon glyphicon-pencil prs" title="Edit Test" ng-click="editUserTest($index)"></span>
                    <span class="glyphicon glyphicon-trash" title="Delete Test" ng-click="deleteUserTest($index)"></span>
                  </div>

                </div><!-- /item__icons -->

                <div class="edit-buttons" ng-show="userTest.editing">
                    <div class="confirm-button" ng-hide="!userTest.new_orgTest || !userTest.new_date" title="Confirm" ng-click="saveUserTest($index)">Confirm</div>
                    <div class="cancel-button" title="Cancel" ng-click="cancelEditUserTest($index)">Cancel</div>
                </div>

              </div>

            </div><!-- /module-data__item -->

          </div><!-- /module-data-items -->

          <div ng-if="editable(current_user, selected_semester)"
              class="module-data__button" ng-click="addUserTest()" ng-hide="userTests.editing">Add Test</div>
        </div><!-- /module-data -->

      </div>

    </div><!-- /section--tests -->

    <div class="section section--tests-taken">

      <div class="section--header">Total Service Hours</div>

      <div class="section--inner">

      	<div class="user-class-greeting" wait-to-load="{{loaded_module_milestones}}">
          Hey {{student.first_name}}, you have finished
          <h4><span class="numbers-large">{{userTests.length}}</span><br>Tests</h4> this semester.
        </div>

      </div>

    </div><!-- /section--tests-taken -->

    <div class="section section--milestones">

    	<div class="section--header">{{selected_module.module_title | underscoresToSpaces}} Milestones</div>

      <div class="section--inner">

        <div class="module-data-content" ng-show="selected_module.points.total == 0">
          <p>Looks like there aren't any {{selected_module.module_title | underscoresToSpaces}} milestones for this semester.</p>
        </div>

        <div class="module-yes-nos" ng-if="milestones.length > 0">

          <div class="yes-nos-unsatisfied section--subsection clear">

            <div class="section--subhead">Next Milestones</div>

            <div class="yes-no-item" ng-repeat="milestone in milestones" ng-if="!milestone.earned">
              <div class="yes-no-item-unstatisfied">

                <div class="yes-no--point-circle">
                  <div class="point-circle--inside">
                    <h5 class="bold">{{milestone.points}}</h5>
                    <p>Points</p>
                  </div>
                </div>

                <input type="checkbox" ng-if="milestone.submodule === 'YesNo'" ng-model="milestone.earned" ng-change="toggleYesNoMilestone(milestone)"
                  ng-disabled="!editable(current_user, selected_semester)">
                <h6>{{milestone | printMilestone}}</h6>
              </div>
            </div>

          </div>

          <div class="yes-nos-unsatisfied section--subsection clear">

            <div class="section--subhead">Completed Milestones</div>

            <div class="yes-no-item" ng-repeat="milestone in milestones" ng-if="milestone.earned">
              <div class="yes-no-item-statisfied">

                <label for="yesNoCheckbox">
                  <div class="yes-no--point-circle">
                    <div class="point-circle--inside">
                      <h4 class="bold">âœ“</h4>
                    </div>
                  </div>
                </label>

                <input id="yesNoCheckbox" type="checkbox" ng-if="milestone.submodule === 'YesNo'" ng-model="milestone.earned" ng-change="toggleYesNoMilestone(milestone)"
                  ng-disabled="!editable(current_user, selected_semester)">
                <h6>{{milestone | printMilestone}}</h6>
              </div>
            </div>

          </div>

        </div>

      </div><!-- /section-inner -->

    </div><!-- /section--milestones -->

  </div>

</div>
