<div class="progressContainer">

  <div class="module-circles js-modules-circles">
    <div class="module-circle" ng-repeat="mod in modules_progress" modulecolor="{{mod.module_title}}" ng-click="selectModule(mod)">
      <div class="module-circle__bg">
        <div class="module-circle__points">
          <div class="value">{{mod.points.user}}/{{mod.points.total}}</div>
          <div class="text" style="font-size: 10px; text-align: center;">points</div>
        </div>
      </div>
      <div class="module-circle__modtitle">{{mod.module_title}}</div>
      <div class="module-circle__arrow-up" modulecolor="{{mod.module_title}}" ng-show="mod.module_title == selected_module.module_title"></div>
    </div>
  </div>


  <div class="module-data-container" modulecolor="{{selected_module.module_title}}">
    <div class="module-data-side-nav js-module-data-side-nav">
      <li class="nav-item" ng-class="{selected: sem.id == selected_semester.id}" ng-repeat="sem in semesters" ng-click="selectSemester(sem)">{{sem.name}}</li>
    </div>

    <div class="module-data-content js-module-data-content">
      <div ng-include="getModuleTemplate(selected_module.module_title)"></div>
    </div>
  </div>

</div>

<script>
  $(function() {
    $('input, textarea').placeholder();

    // Give angular time to render the page before setting the height
    setTimeout(function(){
      setHeight();
    }, 500);

    $(window).resize(function(event) {
      setHeight();
    });

  });

  function setHeight() {
    var windowHeight = $(window).outerHeight();
    var headerHeight = $('header').outerHeight();
    var circlesHeight = $('.js-modules-circles').outerHeight();
    var bodyHeight = windowHeight - headerHeight - circlesHeight;

    var contentHeight = $('.js-module-data-content').outerHeight();

    if (bodyHeight > contentHeight)
    {
      $('.js-module-data-content').outerHeight(bodyHeight + 'px');
      $('.js-module-data-side-nav').outerHeight(bodyHeight + 'px');
    }
    else
    {
      $('.js-module-data-side-nav').outerHeight(contentHeight + 'px');
    }
  }
</script>
