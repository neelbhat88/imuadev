<div ng-controller="ServiceProgressController" class="serviceProgressContainer">

  <div class="section-wrapper clear">

    <div class="module module--service">

    	<div class="module--header">Your Service Records</div>

    	<div class="module--content">

  	    <div class="module--no-data" ng-show="user_service_activities.length == 0">
          <h6>{{student.first_name}}, looks like you haven't entered any data.</h6>
          <h6>Let's get that taken care of. Add your Service Activities for this semester below.</h6>
        </div>

        <div class="module-data">
          <div class="noServiceActivities" ng-hide="user_service_activites.length != 0">No Service Activities Added</div>

          <div class="module-data-items">

            <div class="module-data__item" ng-repeat="(activityIndex, user_service_activity) in user_service_activities" ng-class="{'last':$last}">

              <div class="item item__activity">

                <span class="item__activity-name" ng-hide="user_service_activity.editing">{{user_service_activity.name}}</span>

                <div class="editor-wrapper" ng-show="user_service_activity.editing">
                  <div>Who was the service for?</div>
                  <input class="form-editor" ng-model="user_service_activity.new_name" placeholder="Organization Name" name="serviceActivityName">
                </div>

                <div class="edit-icons">
                  <div ng-if="editable(current_user, selected_semester)" ng-hide="user_service_activity.editing">
                    <span class="glyphicon glyphicon-pencil prs" title="Edit Service Activity" ng-click="editActivity(activityIndex)"></span>
                    <span class="glyphicon glyphicon-trash" title="Delete Activity" ng-click="deleteActivity(activityIndex)"></span>
                  </div>
                </div><!-- edit-icons -->

                <div class="edit-buttons" ng-show="user_service_activity.editing">
                    <div class="confirm-button" title="Confirm" ng-click="saveActivity(activityIndex)">Confirm</div>
                    <div class="cancel-button" title="Cancel" ng-click="cancelActivityEdit(activityIndex)">Cancel</div>
                </div>

              </div><!-- item__activity -->

              <div class="module-data__sub-item" ng-repeat="(eventIndex, user_service_event) in user_service_activity.events" ng-class="{'last':$last}">

                <div class="item__event clear">

                  <div class="item__event-left">

                    <div class="sub-item item__event--description" ng-hide="user_service_event.editing">

                      <span class="item__event--description">{{user_service_event.description}}</span>

                    </div>

                    <div class="editor-wrapper item__event--description-editor" ng-show="user_service_event.editing">
                      <div>What did you do?</div>
                      <input class="form-editor" ng-model="user_service_event.new_description" placeholder="Description" name="serviceEventDescription">
                    </div>

                    <div class="sub-item item__event--date">

                      <span ng-hide="user_service_event.editing">{{user_service_event.date | date: 'MM/dd/yy'}}</span>
                        <div class="item__event--edit-links" ng-if="editable(current_user, selected_semester)"
                              ng-hide="user_service_event.editing">
                          <a class="edit-link" ng-click="editEvent(activityIndex, eventIndex)">Edit</a>
                          <a class="edit-link" ng-click="deleteEvent(activityIndex, eventIndex)">Delete</a>
                        </div>

                    </div>

                    <div class="editor-wrapper item-event--date-editor" ng-show="user_service_event.editing">
                      <div>Date</div>
                      <input class="form-editor" type="text" ng-model="user_service_event.new_date" placeholder="Date" datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" is-open="isOpen" ng-click="isOpen = true">
                    </div>

                    <div class="edit-buttons" ng-show="user_service_event.editing">
                        <div class="confirm-button" title="Confirm" ng-click="saveEvent(activityIndex, eventIndex, user_service_activity.id)">Confirm</div>
                        <div class="cancel-button" title="Cancel" ng-click="cancelEventEdit(activityIndex, eventIndex)">Cancel</div>
                    </div>

                  </div>

                  <div class="item__event-right">

                    <div class="sub-item item__event--hours">

                      <span ng-hide="user_service_event.editing">
                        <span class="number-hours">{{user_service_event.hours}}</span><br>
                        <span class="hours">Hours</span>
                      </span>

                    </div>

                    <div class="editor-wrapper item__event--hours-editor" ng-show="user_service_event.editing">
                      <div>How many hours?</div>
                      <input class="form-editor" ng-model="user_service_event.new_hours" placeholder="Hours" name="serviceEventHours">
                    </div>

                  </div>

                </div><!-- item__event -->

              </div><!-- module-data__item (event) -->

              <div ng-if="editable(current_user, selected_semester)"
                  class="module-data__button" ng-click="addEvent(activityIndex, user_service_activity.id)" ng-hide="user_service_activities[activityIndex].events.editing">Add Hours
              </div>

            </div><!-- module-data__item -->

          </div>

          <div ng-if="editable(current_user, selected_semester)"
              class="module-data__button button-wide" ng-click="addActivity()" ng-hide="user_service_activities.editing">Add Service Organization
          </div>
        </div>

    	</div>

    </div> <!-- /module--service -->

    <div class="module module--hours">

      <div class="module--header">Total Service Hours</div>

      <div class="module--content">

      	<div class="user-class-greeting" wait-to-load="{{loaded_semester_service_hours}}">
          Hey {{student.first_name}}, you have completed
          <h4><span class="numbers-large">{{semester_service_hours}}</span><br>Service Hours</h4> this semester.
        </div>

      </div>

    </div><!-- /module--gpa -->

    <div class="module module--milestones">

    	<div class="module--header">{{selected_module.module_title | underscoresToSpaces}} Milestones</div>

      <div class="module--content">

        <div class="module-data-content" ng-show="selected_module.points.total == 0">
          <p>Looks like there aren't any {{selected_module.module_title | underscoresToSpaces}} milestones for this semester.</p>
        </div>

        <div class="module-milestones" ng-if="milestones.length > 0">

          <div class="milestones-unsatisfied module--submodule">

            <div class="module--subhead">Next Milestones</div>

            <div class="milestone-item" ng-repeat="milestone in milestones" ng-if="!milestone.earned">
              <div class="milestone-item-unstatisfied">

                <div class="milestone--point-circle">
                  <div class="point-circle--inside">
                    <h5 class="bold">{{milestone.points}}</h5>
                    <p>Points</p>
                  </div>
                </div>

                <input type="checkbox" ng-if="milestone.submodule === 'YesNo'" ng-model="milestone.earned" ng-change="toggleYesNoMilestone(milestone)"
                  ng-disabled="!editable(current_user, selected_semester)">
                <h6>{{milestone | printMilestone}}</h6>
              </div>
            </div>

          </div>

          <div class="milestones-unsatisfied module--submodule">

            <div class="module--subhead">Completed Milestones</div>

            <div class="milestone-item" ng-repeat="milestone in milestones" ng-if="milestone.earned">
              <div class="milestone-item-statisfied">

                <div class="milestone--point-circle">
                  <div class="point-circle--inside">
                    <h4 class="bold">âœ“</h4>
                  </div>
                </div>

                <input type="checkbox" ng-if="milestone.submodule === 'YesNo'" ng-model="milestone.earned" ng-change="toggleYesNoMilestone(milestone)"
                  ng-disabled="!editable(current_user, selected_semester)">
                <h6>{{milestone | printMilestone}}</h6>
              </div>
            </div>

          </div>

        </div>

      </div><!-- /module-inner -->

    </div><!-- /academic-milestones -->

  </div>

</div>
