<div class="taskContainer" wait-to-load="{{loaded_data}}">

  <div class="task-header clear">
    <div class="single-col-wrapper">
      <div class="back-link">
        <div back-button class="ng-clickable">
          <h6>
            <span class="glyphicon glyphicon-circle-arrow-left"></span>
            <span class="ng-clickable-text">Go Back</span>
          </h6>
        </div>
      </div>
    </div>
  </div>

  <div class="single-col-wrapper clear">
    <div class="assignment--left">

      <div class="task-content">
        <h4>{{milestone | printMilestone}}</h4>
      </div>

      <div ng-if="loaded_data && milestoneHasTasks()">
        <div ng-include="'assignment/widgets/assignments_list.html'"></div>
        <div class="task-adder">
          <div class="form-wrapper">
            <label><h6>Task Name:</h6></label>
            <input class="form-control" ng-model="new_assignment.title" placeholder="Title">
            <label><h6>Due Date:</h6></label>
            <imua-datepicker date="new_assignment.due_datetime"></imua-datepicker>
          </div>

          <!-- <label><h5>Details:</h5></label>
          <text-angular name="taskDescription" ta-toolbar="[['bold','italics','underline'],['ol','ul','insertLink']]" ng-model="assignment.new_description" placeholder="Description"></text-angular> -->

          <div task-editor class="edit-buttons-top">
            <button class="btn btn-success" ng-click="saveNewAssignment()"><span class="glyphicon glyphicon-ok"></span> Add Task</button>
          </div>
        </div>
      </div>

      <div ng-if="num_students_in_semester == 0">
        <h5 ng-if="current_user.is_org_admin" class="italic">There are no students currently in {{milestone.time_unit_name}}</h5>
        <h5 ng-if="current_user.is_mentor" class="italic">None of your students are currently in {{milestone.time_unit_name}}</h5>
      </div>

      <ul class="users-not-completed" ng-if="users_incomplete.length != 0">
        <h6 class="bold red" ng-if="users_incomplete.length == 1">{{users_incomplete.length}} student has not completed this milestone</h6>
        <h6 class="bold red" ng-if="users_incomplete.length != 1">{{users_incomplete.length}} students have not completed this milestone</h6>
        <li class="medium-circle-pictures" ng-repeat="user in users_incomplete | orderBy: 'last_name'">
          <a href="app#/progress/{{user.id}}">
            <div class="medium-circle-picture">
              <img ng-src="{{user.square_avatar_url}}"/>
            </div>
            <span class="bold">{{user.first_last_initial}}</span>
          </a>
        </li>
      </ul>

      <ul class="users-completed" ng-if="users_complete.length != 0">
        <h6 class="bold green" ng-if="users_complete.length == 1 && users_incomplete.length != 0">{{users_complete.length}} student has completed this milestone</h6>
        <h6 class="bold green" ng-if="users_complete.length != 1 && users_incomplete.length != 0">{{users_complete.length}} students have completed this milestone</h6>
        <h6 class="bold green" ng-if="users_complete.length != 0 && users_incomplete.length == 0">Nice! All students have completed this milestone.</h6>
        <li class="medium-circle-pictures" ng-repeat="user in users_complete | orderBy: 'last_name'">
          <a href="app#/progress/{{user.id}}">
            <div class="medium-circle-picture">
              <img ng-src="{{user.square_avatar_url}}"/>
            </div>
            <span class="bold">{{user.first_last_initial}}</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="assignment--right">
      <ul>
        <li class="column-title">
          <h5 class="bold">Milestone Info</h5>
        </li>
        <li>
          <h6 class="bold">{{milestone.title}}</h6>
        </li>
        <li>
          <h6>{{milestone.time_unit_name}}</h6>
        </li>
        <li>
          <h6>Students currently in {{milestone.time_unit_name}}</h6>
          <h5 class="bold">{{users_total.length}}</h5>
          <h6>
            ({{percent_complete}}% Complete)
          </h6>
        </li>
        <li>
          <!-- <h6>Created by</h6>
          <a href="app#/profile/{{user.id}}">
            <div class="tiny-circle-picture">
              <img ng-src="{{user.square_avatar_url}}" alt="{{user.first_name}} {{user.last_name}}" />
            </div>
            <h6 class="bold">{{user.first_name}} {{user.last_name}}</h6>
          </a> -->
          <!-- <p>Created on</p>
          <p>{{milestone.created_at | formatMDY}}</p> -->
        </li>
      </ul>
    </div>
  </div>

</div>
